<!-- build time:Mon Jul 11 2022 13:36:06 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="baidu-site-verification" content="code-NAUyjdjtWe"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="//cdn.jsdelivr.net/gh/Jerysurp/Jerysurp.github.io@latest/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="//cdn.jsdelivr.net/gh/Jerysurp/Jerysurp.github.io@latest/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="熵白之痕" href="https://entropywhite.com/rss.xml"><link rel="alternate" type="application/atom+xml" title="熵白之痕" href="https://entropywhite.com/atom.xml"><link rel="alternate" type="application/json" title="熵白之痕" href="https://entropywhite.com/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/Jerysurp/Jerysurp.github.io@latest/css/app.css?v=0.2.5"><link rel="canonical" href="https://entropywhite.com/computer-science/web/node/%E4%BB%A3%E7%A0%81%E7%BB%84%E7%BB%87%E5%92%8C%E9%83%A8%E7%BD%B2/"><title>| Entropy White = 熵白之痕 = 以前进为目标吧</title><meta name="generator" content="Hexo 5.4.1"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline"></h1><div class="meta"><span class="item" title="创建时间：2022-03-22 23:19:39"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-03-22T23:19:39+08:00">2022-03-22</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>6.4k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>6 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Entropy White</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1giciszlczyj20zk0m816d.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1giclhpw3lwj20zk0m8gvw.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1giclhtuo6nj20zk0m8ttm.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gipeu1usa7j20zk0m8b29.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gipey84bjtj20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gipevo9j1jj20zk0m8e81.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://entropywhite.com/computer-science/web/node/%E4%BB%A3%E7%A0%81%E7%BB%84%E7%BB%87%E5%92%8C%E9%83%A8%E7%BD%B2/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="//cdn.jsdelivr.net/gh/Jerysurp/Jerysurp.github.io@latest/images/cat.jpg"><meta itemprop="name" content="EntropyWhite"><meta itemprop="description" content="以前进为目标吧, 欢迎来到熵白的博客"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="熵白之痕"></span><div class="body md" itemprop="articleBody"><h3 id="模块路径解析规则"><a class="anchor" href="#模块路径解析规则">#</a> 模块路径解析规则</h3><p>我们已经知道， <code>require</code> 函数支持斜杠（ <code>/</code> ）或盘符（ <code>C:</code> ）开头的绝对路径，也支持 <code>./</code> 开头的相对路径。但这两种路径在模块之间建立了强耦合关系，一旦某个模块文件的存放位置需要变更，使用该模块的其它模块的代码也需要跟着调整，变得牵一发动全身。因此， <code>require</code> 函数支持第三种形式的路径，写法类似于 <code>foo/bar</code> ，并依次按照以下规则解析路径，直到找到模块位置。</p><ol><li><p>内置模块</p><p>如果传递给 <code>require</code> 函数的是 NodeJS 内置模块名称，不做路径解析，直接返回内部模块的导出对象，例如 <code>require('fs')</code> 。</p></li><li><p>node_modules 目录</p><p>NodeJS 定义了一个特殊的 <code>node_modules</code> 目录用于存放模块。例如某个模块的绝对路径是 <code>/home/user/hello.js</code> ，在该模块中使用 <code>require('foo/bar')</code> 方式加载模块时，则 NodeJS 依次尝试使用以下路径。</p><pre><code> /home/user/node_modules/foo/bar
 /home/node_modules/foo/bar
 /node_modules/foo/bar
</code></pre></li><li><p>NODE_PATH 环境变量</p><p>与 PATH 环境变量类似，NodeJS 允许通过 NODE_PATH 环境变量来指定额外的模块搜索路径。NODE_PATH 环境变量中包含一到多个目录路径，路径之间在 Linux 下使用 <code>:</code> 分隔，在 Windows 下使用 <code>;</code> 分隔。例如定义了以下 NODE_PATH 环境变量：</p><pre><code> NODE_PATH=/home/user/lib:/home/lib
</code></pre><p>当使用 <code>require('foo/bar')</code> 的方式加载模块时，则 NodeJS 依次尝试以下路径。</p><pre><code> /home/user/lib/foo/bar
 /home/lib/foo/bar
</code></pre></li></ol><h3 id="包package"><a class="anchor" href="#包package">#</a> 包（package）</h3><p>我们已经知道了 JS 模块的基本单位是单个 JS 文件，但复杂些的模块往往由多个子模块组成。为了便于管理和使用，我们可以把由多个子模块组成的大模块称做 <code>包</code> ，并把所有子模块放在同一个目录里。</p><p>在组成一个包的所有子模块中，需要有一个入口模块，入口模块的导出对象被作为包的导出对象。例如有以下目录结构。</p><pre><code>- /home/user/lib/
    - cat/
        head.js
        body.js
        main.js
</code></pre><p>其中 <code>cat</code> 目录定义了一个包，其中包含了 3 个子模块。 <code>main.js</code> 作为入口模块，其内容如下：</p><pre><code>var head = require('./head');
var body = require('./body');

exports.create = function (name) &#123;
    return &#123;
        name: name,
        head: head.create(),
        body: body.create()
    &#125;;
&#125;;
</code></pre><p>在其它模块里使用包的时候，需要加载包的入口模块。接着上例，使用 <code>require('/home/user/lib/cat/main')</code> 能达到目的，但是入口模块名称出现在路径里看上去不是个好主意。因此我们需要做点额外的工作，让包使用起来更像是单个模块。</p><h4 id="indexjs"><a class="anchor" href="#indexjs">#</a> index.js</h4><p>当模块的文件名是 <code>index.js</code> ，加载模块时可以使用模块所在目录的路径代替模块文件路径，因此接着上例，以下两条语句等价。</p><pre><code>var cat = require('/home/user/lib/cat');
var cat = require('/home/user/lib/cat/index');
</code></pre><p>这样处理后，就只需要把包目录路径传递给 <code>require</code> 函数，感觉上整个目录被当作单个模块使用，更有整体感。</p><h4 id="packagejson"><a class="anchor" href="#packagejson">#</a> package.json</h4><p>如果想自定义入口模块的文件名和存放位置，就需要在包目录下包含一个 <code>package.json</code> 文件，并在其中指定入口模块的路径。上例中的 <code>cat</code> 模块可以重构如下。</p><pre><code>- /home/user/lib/
    - cat/
        + doc/
        - lib/
            head.js
            body.js
            main.js
        + tests/
        package.json
</code></pre><p>其中 <code>package.json</code> 内容如下。</p><pre><code>&#123;
    &quot;name&quot;: &quot;cat&quot;,
    &quot;main&quot;: &quot;./lib/main.js&quot;
&#125;
</code></pre><p>如此一来，就同样可以使用 <code>require('/home/user/lib/cat')</code> 的方式加载模块。NodeJS 会根据包目录下的 <code>package.json</code> 找到入口模块所在位置。</p><h3 id="命令行程序"><a class="anchor" href="#命令行程序">#</a> 命令行程序</h3><p>使用 NodeJS 编写的东西，要么是一个包，要么是一个命令行程序，而前者最终也会用于开发后者。因此我们在部署代码时需要一些技巧，让用户觉得自己是在使用一个命令行程序。</p><p>例如我们用 NodeJS 写了个程序，可以把命令行参数原样打印出来。该程序很简单，在主模块内实现了所有功能。并且写好后，我们把该程序部署在 <code>/home/user/bin/node-echo.js</code> 这个位置。为了在任何目录下都能运行该程序，我们需要使用以下终端命令。</p><pre><code>$ node /home/user/bin/node-echo.js Hello World
Hello World
</code></pre><p>这种使用方式看起来不怎么像是一个命令行程序，下边的才是我们期望的方式。</p><pre><code>$ node-echo Hello World
</code></pre><h4 id="linux"><a class="anchor" href="#linux">#</a> Linux</h4><p>在 Linux 系统下，我们可以把 JS 文件当作 shell 脚本来运行，从而达到上述目的，具体步骤如下：</p><ol><li><p>在 shell 脚本中，可以通过 <code>#!</code> 注释来指定当前脚本使用的解析器。所以我们首先在 <code>node-echo.js</code> 文件顶部增加以下一行注释，表明当前脚本使用 NodeJS 解析。</p><pre><code> #! /usr/bin/env node
</code></pre><p>NodeJS 会忽略掉位于 JS 模块首行的 <code>#!</code> 注释，不必担心这行注释是非法语句。</p></li><li><p>然后，我们使用以下命令赋予 <code>node-echo.js</code> 文件执行权限。</p><pre><code> $ chmod +x /home/user/bin/node-echo.js
</code></pre></li><li><p>最后，我们在 PATH 环境变量中指定的某个目录下，例如在 <code>/usr/local/bin</code> 下边创建一个软链文件，文件名与我们希望使用的终端命令同名，命令如下：</p><pre><code> $ sudo ln -s /home/user/bin/node-echo.js /usr/local/bin/node-echo
</code></pre></li></ol><p>这样处理后，我们就可以在任何目录下使用 <code>node-echo</code> 命令了。</p><h4 id="windows"><a class="anchor" href="#windows">#</a> Windows</h4><p>在 Windows 系统下的做法完全不同，我们得靠 <code>.cmd</code> 文件来解决问题。假设 <code>node-echo.js</code> 存放在 <code>C:\Users\user\bin</code> 目录，并且该目录已经添加到 PATH 环境变量里了。接下来需要在该目录下新建一个名为 <code>node-echo.cmd</code> 的文件，文件内容如下：</p><pre><code>@node &quot;C:\User\user\bin\node-echo.js&quot; %*
</code></pre><p>这样处理后，我们就可以在任何目录下使用 <code>node-echo</code> 命令了。</p><h3 id="工程目录"><a class="anchor" href="#工程目录">#</a> 工程目录</h3><p>了解了以上知识后，现在我们可以来完整地规划一个工程目录了。以编写一个命令行程序为例，一般我们会同时提供命令行模式和 API 模式两种使用方式，并且我们会借助三方包来编写代码。除了代码外，一个完整的程序也应该有自己的文档和测试用例。因此，一个标准的工程目录都看起来像下边这样。</p><pre><code>- /home/user/workspace/node-echo/   # 工程目录
    - bin/                          # 存放命令行相关代码
        node-echo
    + doc/                          # 存放文档
    - lib/                          # 存放API相关代码
        echo.js
    - node_modules/                 # 存放三方包
        + argv/
    + tests/                        # 存放测试用例
    package.json                    # 元数据文件
    README.md                       # 说明文件
</code></pre><p>其中部分文件内容如下：</p><pre><code>/* bin/node-echo */
var argv = require('argv'),
    echo = require('../lib/echo');
console.log(echo(argv.join(' ')));

/* lib/echo.js */
module.exports = function (message) &#123;
    return message;
&#125;;

/* package.json */
&#123;
    &quot;name&quot;: &quot;node-echo&quot;,
    &quot;main&quot;: &quot;./lib/echo.js&quot;
&#125;
</code></pre><p>以上例子中分类存放了不同类型的文件，并通过 <code>node_moudles</code> 目录直接使用三方包名加载模块。此外，定义了 <code>package.json</code> 之后， <code>node-echo</code> 目录也可被当作一个包来使用。</p><h3 id="npm"><a class="anchor" href="#npm">#</a> NPM</h3><p>NPM 是随同 NodeJS 一起安装的包管理工具，能解决 NodeJS 代码部署上的很多问题，常见的使用场景有以下几种：</p><ul><li>允许用户从 NPM 服务器下载别人编写的三方包到本地使用。</li><li>允许用户从 NPM 服务器下载并安装别人编写的命令行程序到本地使用。</li><li>允许用户将自己编写的包或命令行程序上传到 NPM 服务器供别人使用。</li></ul><p>可以看到，NPM 建立了一个 NodeJS 生态圈，NodeJS 开发者和用户可以在里边互通有无。以下分别介绍这三种场景下怎样使用 NPM。</p><h4 id="下载三方包"><a class="anchor" href="#下载三方包">#</a> 下载三方包</h4><p>需要使用三方包时，首先得知道有哪些包可用。虽然<span class="exturl" data-url="aHR0cHM6Ly9ucG1qcy5vcmcv"> npmjs.org</span> 提供了个搜索框可以根据包名来搜索，但如果连想使用的三方包的名字都不确定的话，就请百度一下吧。知道了包名后，比如上边例子中的 <code>argv</code> ，就可以在工程目录下打开终端，使用以下命令来下载三方包。</p><pre><code>$ npm install argv
...
argv@0.0.2 node_modules\argv
</code></pre><p>下载好之后， <code>argv</code> 包就放在了工程目录下的 <code>node_modules</code> 目录中，因此在代码中只需要通过 <code>require('argv')</code> 的方式就好，无需指定三方包路径。</p><p>以上命令默认下载最新版三方包，如果想要下载指定版本的话，可以在包名后边加上 <code>@&lt;version&gt;</code> ，例如通过以下命令可下载 0.0.1 版的 <code>argv</code> 。</p><pre><code>$ npm install argv@0.0.1
...
argv@0.0.1 node_modules\argv
</code></pre><p>如果使用到的三方包比较多，在终端下一个包一条命令地安装未免太人肉了。因此 NPM 对 <code>package.json</code> 的字段做了扩展，允许在其中申明三方包依赖。因此，上边例子中的 <code>package.json</code> 可以改写如下：</p><pre><code>&#123;
    &quot;name&quot;: &quot;node-echo&quot;,
    &quot;main&quot;: &quot;./lib/echo.js&quot;,
    &quot;dependencies&quot;: &#123;
        &quot;argv&quot;: &quot;0.0.2&quot;
    &#125;
&#125;
</code></pre><p>这样处理后，在工程目录下就可以使用 <code>npm install</code> 命令批量安装三方包了。更重要的是，当以后 <code>node-echo</code> 也上传到了 NPM 服务器，别人下载这个包时，NPM 会根据包中申明的三方包依赖自动下载进一步依赖的三方包。例如，使用 <code>npm install node-echo</code> 命令时，NPM 会自动创建以下目录结构。</p><pre><code>- project/
    - node_modules/
        - node-echo/
            - node_modules/
                + argv/
            ...
    ...
</code></pre><p>如此一来，用户只需关心自己直接使用的三方包，不需要自己去解决所有包的依赖关系。</p><h4 id="安装命令行程序"><a class="anchor" href="#安装命令行程序">#</a> 安装命令行程序</h4><p>从 NPM 服务上下载安装一个命令行程序的方法与三方包类似。例如上例中的 <code>node-echo</code> 提供了命令行使用方式，只要 <code>node-echo</code> 自己配置好了相关的 <code>package.json</code> 字段，对于用户而言，只需要使用以下命令安装程序。</p><pre><code>$ npm install node-echo -g
</code></pre><p>参数中的 <code>-g</code> 表示全局安装，因此 <code>node-echo</code> 会默认安装到以下位置，并且 NPM 会自动创建好 Linux 系统下需要的软链文件或 Windows 系统下需要的 <code>.cmd</code> 文件。</p><pre><code>- /usr/local/               # Linux系统下
    - lib/node_modules/
        + node-echo/
        ...
    - bin/
        node-echo
        ...
    ...

- %APPDATA%\npm\            # Windows系统下
    - node_modules\
        + node-echo\
        ...
    node-echo.cmd
    ...
</code></pre><h4 id="发布代码"><a class="anchor" href="#发布代码">#</a> 发布代码</h4><p>第一次使用 NPM 发布代码前需要注册一个账号。终端下运行 <code>npm adduser</code> ，之后按照提示做即可。账号搞定后，接着我们需要编辑 <code>package.json</code> 文件，加入 NPM 必需的字段。接着上边 <code>node-echo</code> 的例子， <code>package.json</code> 里必要的字段如下。</p><pre><code>&#123;
    &quot;name&quot;: &quot;node-echo&quot;,           # 包名，在NPM服务器上须要保持唯一
    &quot;version&quot;: &quot;1.0.0&quot;,            # 当前版本号
    &quot;dependencies&quot;: &#123;              # 三方包依赖，需要指定包名和版本号
        &quot;argv&quot;: &quot;0.0.2&quot;
      &#125;,
    &quot;main&quot;: &quot;./lib/echo.js&quot;,       # 入口模块位置
    &quot;bin&quot; : &#123;
        &quot;node-echo&quot;: &quot;./bin/node-echo&quot;      # 命令行程序名和主模块位置
    &#125;
&#125;
</code></pre><p>之后，我们就可以在 <code>package.json</code> 所在目录下运行 <code>npm publish</code> 发布代码了。</p><h4 id="版本号"><a class="anchor" href="#版本号">#</a> 版本号</h4><p>使用 NPM 下载和发布代码时都会接触到版本号。NPM 使用语义版本号来管理代码，这里简单介绍一下。</p><p>语义版本号分为 <code>X.Y.Z</code> 三位，分别代表主版本号、次版本号和补丁版本号。当代码变更时，版本号按以下原则更新。</p><pre><code>+ 如果只是修复bug，需要更新Z位。

+ 如果是新增了功能，但是向下兼容，需要更新Y位。

+ 如果有大变动，向下不兼容，需要更新X位。
</code></pre><p>版本号有了这个保证后，在申明三方包依赖时，除了可依赖于一个固定版本号外，还可依赖于某个范围的版本号。例如 <code>&quot;argv&quot;: &quot;0.0.x&quot;</code> 表示依赖于 <code>0.0.x</code> 系列的最新版 <code>argv</code> 。NPM 支持的所有版本号范围指定方式可以查看<span class="exturl" data-url="aHR0cHM6Ly9ucG1qcy5vcmcvZG9jL2ZpbGVzL3BhY2thZ2UuanNvbi5odG1sI2RlcGVuZGVuY2llcw==">官方文档</span>。</p><h4 id="灵机一点"><a class="anchor" href="#灵机一点">#</a> 灵机一点</h4><p>除了本章介绍的部分外，NPM 还提供了很多功能， <code>package.json</code> 里也有很多其它有用的字段。除了可以在<span class="exturl" data-url="aHR0cHM6Ly9ucG1qcy5vcmcvZG9jLw=="> npmjs.org/doc/</span> 查看官方文档外，这里再介绍一些 NPM 常用命令。</p><ul><li>NPM 提供了很多命令，例如 <code>install</code> 和 <code>publish</code> ，使用 <code>npm help</code> 可查看所有命令。</li><li>使用 <code>npm help &lt;command&gt;</code> 可查看某条命令的详细帮助，例如 <code>npm help install</code> 。</li><li>在 <code>package.json</code> 所在目录下使用 <code>npm install . -g</code> 可先在本地安装当前命令行程序，可用于发布前的本地测试。</li><li>使用 <code>npm update &lt;package&gt;</code> 可以把当前目录下 <code>node_modules</code> 子目录里边的对应模块更新至最新版本。</li><li>使用 <code>npm update &lt;package&gt; -g</code> 可以把全局安装的对应命令行程序更新至最新版。</li><li>使用 <code>npm cache clear</code> 可以清空 NPM 本地缓存，用于对付使用相同版本号发布新版本代码的人。</li><li>使用 <code>npm unpublish &lt;package&gt;@&lt;version&gt;</code> 可以撤销发布自己发布过的某个版本代码。</li></ul><h3 id="小结"><a class="anchor" href="#小结">#</a> 小结</h3><p>本章介绍了使用 NodeJS 编写代码前需要做的准备工作，总结起来有以下几点：</p><ul><li>编写代码前先规划好目录结构，才能做到有条不紊。</li><li>稍大些的程序可以将代码拆分为多个模块管理，更大些的程序可以使用包来组织模块。</li><li>合理使用 <code>node_modules</code> 和 <code>NODE_PATH</code> 来解耦包的使用方式和物理路径。</li><li>使用 NPM 加入 NodeJS 生态圈互通有无。</li><li>想到了心仪的包名时请提前在 NPM 上抢注。</li></ul></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-03-22 23:25:51" itemprop="dateModified" datetime="2022-03-22T23:25:51+08:00">2022-03-22</time> </span><span id="computer-science/web/node/代码组织和部署/" class="item leancloud_visitors" data-flag-title="" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>EntropyWhite <i class="ic i-at"><em>@</em></i>熵白之痕</li><li class="link"><strong>本文链接：</strong> <a href="https://entropywhite.com/computer-science/web/node/%E4%BB%A3%E7%A0%81%E7%BB%84%E7%BB%87%E5%92%8C%E9%83%A8%E7%BD%B2/">https://entropywhite.com/computer-science/web/node/代码组织和部署/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/web/node/NodeJs%E5%9F%BA%E7%A1%80/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva2.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipeyhsblkj20zk0m81kx.jpg" title="未命名"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>未命名</h3></a></div><div class="item right"><a href="/computer-science/web/node/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva2.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giclgrvbd6j20zk0m8qv5.jpg" title="未命名"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>未命名</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E8%B7%AF%E5%BE%84%E8%A7%A3%E6%9E%90%E8%A7%84%E5%88%99"><span class="toc-number">1.</span> <span class="toc-text">模块路径解析规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%85package"><span class="toc-number">2.</span> <span class="toc-text">包（package）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#indexjs"><span class="toc-number">2.1.</span> <span class="toc-text">index.js</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#packagejson"><span class="toc-number">2.2.</span> <span class="toc-text">package.json</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span class="toc-number">3.</span> <span class="toc-text">命令行程序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#linux"><span class="toc-number">3.1.</span> <span class="toc-text">Linux</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#windows"><span class="toc-number">3.2.</span> <span class="toc-text">Windows</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E7%A8%8B%E7%9B%AE%E5%BD%95"><span class="toc-number">4.</span> <span class="toc-text">工程目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#npm"><span class="toc-number">5.</span> <span class="toc-text">NPM</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E4%B8%89%E6%96%B9%E5%8C%85"><span class="toc-number">5.1.</span> <span class="toc-text">下载三方包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span class="toc-number">5.2.</span> <span class="toc-text">安装命令行程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E5%B8%83%E4%BB%A3%E7%A0%81"><span class="toc-number">5.3.</span> <span class="toc-text">发布代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%88%E6%9C%AC%E5%8F%B7"><span class="toc-number">5.4.</span> <span class="toc-text">版本号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%81%B5%E6%9C%BA%E4%B8%80%E7%82%B9"><span class="toc-number">5.5.</span> <span class="toc-text">灵机一点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">6.</span> <span class="toc-text">小结</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="EntropyWhite" data-src="//cdn.jsdelivr.net/gh/Jerysurp/Jerysurp.github.io@latest/images/cat.jpg"><p class="name" itemprop="name">EntropyWhite</p><div class="description" itemprop="description">欢迎来到熵白的博客</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">128</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">7</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">10</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0plcnlzdXJw" title="https:&#x2F;&#x2F;github.com&#x2F;Jerysurp"><i class="ic i-github"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPXlvdXJpZA==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;yourid"><i class="ic i-cloud-music"></i></span> <span class="exturl item bilibili" data-url="aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vNTEzMTAwNDY/c3BtX2lkX2Zyb209MzMzLjEwMDcuMC4w" title="https:&#x2F;&#x2F;space.bilibili.com&#x2F;51310046?spm_id_from&#x3D;333.1007.0.0"><i class="ic i-bilibili"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item"><a href="/links/" rel="section"><i class="ic i-magic"></i>链接</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/computer-science/web/node/NodeJs%E5%9F%BA%E7%A1%80/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/computer-science/web/node/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/blog/" title="分类于 hexo博客">hexo博客</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/blog/Theme-Shoka-Documentation/" title="分类于 Theme Shoka Documentation">Theme Shoka Documentation</a></div><span><a href="/computer-science/blog/theme-shoka-doc/%E7%95%8C%E9%9D%A2%E6%98%BE%E7%A4%BA/" title="Step.3 界面显示">Step.3 界面显示</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/computer-science/web/%E4%BA%92%E8%81%94%E7%BD%91/QUIC%E5%8D%8F%E8%AE%AE/" title="未命名">未命名</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/computer-science/web/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/CORS%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%E5%92%8C%E5%AE%89%E5%85%A8%E7%9F%A5%E8%AF%86/" title="未命名">未命名</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/computer-science/web/W3C/W3C-HTML%E6%B4%BB%E5%8A%A8/" title="未命名">未命名</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/computer-science/web/%E4%BA%92%E8%81%94%E7%BD%91/HTTP%E3%80%81HTTPS/" title="未命名">未命名</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/web/" title="分类于 web">web</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/web/JavaScript/" title="分类于 JavaScript">JavaScript</a></div><span><a href="/computer-science/web/JavaScript/ES6/%E5%87%BD%E6%95%B0/" title="ES6函数">ES6函数</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/web/" title="分类于 web">web</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/web/html/" title="分类于 html">html</a></div><span><a href="/computer-science/web/html/html%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/" title="html代码规范">html代码规范</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/computer-science/web/SVN/SVN%E5%88%9B%E5%BB%BA%E7%89%88%E6%9C%AC%E5%BA%93/" title="未命名">未命名</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/computer-science/web/W3C/W3C-XML%E6%B4%BB%E5%8A%A8/" title="未命名">未命名</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/web/" title="分类于 web">web</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/web/JavaScript/" title="分类于 JavaScript">JavaScript</a></div><span><a href="/computer-science/web/JavaScript/ES6/%E7%AE%80%E4%BB%8B/" title="ES6简介">ES6简介</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">EntropyWhite @ Entropy White</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">304k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">4:36</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"computer-science/web/node/代码组织和部署/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="//cdn.jsdelivr.net/gh/Jerysurp/Jerysurp.github.io@latest/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->